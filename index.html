<!DOCTYPE html>





<html lang="">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  <link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Hexo</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            
  <div id="posts" class="posts-expand">
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/30/动态代理的选择/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/11/30/动态代理的选择/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-30 09:59:03 / Modified: 23:07:55" itemprop="dateCreated datePublished" datetime="2019-11-30T09:59:03+08:00">2019-11-30</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Spring使用AOP(面向切面编程)来管理你的应用。而实现代理有两种方式：CGLIB和JDK动态代理。<br>看一段JDK动态代理的demo<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDynamicProxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HelloImp hello = <span class="keyword">new</span> HelloImp();</span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler(hello);</span><br><span class="line">        Hello proxyHello = (Hello) Proxy.newProxyInstance(HelloImp.class.getClassLoader(),</span><br><span class="line">                HelloImp.class.getInterfaces(), handler);</span><br><span class="line">        proxyHello.sayHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloImp</span> <span class="keyword">implements</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello world"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyInvocationHandler</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Invoking sayHello"</span>);</span><br><span class="line">        Object result = method.invoke(target, args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">上面的例子简单地实现了动态代理的创建和代理操作，以接口为纽带，为被代理目标创建代理对象，这样就可以利用代理对象间接运行调用目标的逻辑，并且实现轻易的拓展。比如这里额外打印了一句话。  </span><br><span class="line">但是这种实现是以接口为中心的，如果本身的系统设计中不需要接口，这样相当于额外增加了限制，因此可以选择另外一种不依赖接口的动态代理方式，cglib;</span><br><span class="line">cglib使用的是创建被代理目标子类的方式。在Spring中，使用哪种方式是由Spring指定的，如果一个目标类实现了一个或多个接口，Spring就会实现JDK动态代理，这促使你更多的采用面向接口的方式编程。如果没有实现接口，就会使用cglib。</span><br><span class="line">当然你也可以强制指定使用cglib动态代理，当然这是有限制的，一是目标类不能是<span class="keyword">final</span>的，二是需要CGLIB2 字节码库。</span><br><span class="line">```xml</span><br><span class="line">&lt;aop:config proxy-target-<span class="class"><span class="keyword">class</span></span>=<span class="string">"true"</span>&gt;</span><br><span class="line">	</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure></p>
<p>如果是使用@AspectJ注解的话，配置如下</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>/&gt;</span>
</code></pre>
<p>spring官方文档传送门：<a href="https://docs.spring.io/spring/docs/2.0.0/reference/aop.html#d0e9015" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/2.0.0/reference/aop.html#d0e9015</a>  </p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/12/ex2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/10/12/ex2/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-10-12 13:58:10" itemprop="dateCreated datePublished" datetime="2019-10-12T13:58:10+08:00">2019-10-12</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/16/实模式和保护模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/16/实模式和保护模式/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-16 10:41:35 / Modified: 11:17:01" itemprop="dateCreated datePublished" datetime="2019-09-16T10:41:35+08:00">2019-09-16</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>实模式(real mode)和保护模式(protected mode)</p>
<p>这是CPU的工作模式，在早期CPU上运行的是实模式，而现代CPU用的是保护模式，至于为什么现代PC也要从实模式启动，是为了向后兼容。<br>实模式出现于早期8088CPU时期，当时硬件性能有限，只有20位地址线，地址空间只有1MB，以及8个16位的通用寄存器，以及4个16位的段寄存器，因为只有十六位，所以想指向20位的地址需要进行一些变换。</p>
<p>(段基址：段偏移量)，第一个字段是段基址，有段寄存器提供%cs，%ds，%ss，%es的。具体这个指令采用哪个段寄存器是由这个指令的类型来决定的。比如要取指令就是采用%cs寄存器，要读取或写入数据就是%ds寄存器，如果要对堆栈操作就是%ss寄存器.  第二个是段内偏移量，代表访问的内存距离段基址的偏移，由通用寄存器提供。这里主存的计算方式是 段基址向左偏移四位，再与段内偏移量相加。<br>所以假设 %cs中的值是0xff00，%ax = 0x0110。则(%cs:%ax)这个地址对应的真实物理地址是 0xff00&lt;&lt;4 + 0x0110 = 0xff110。<br>但是！现在的CPU地址线个数已经变成了32根，所以可访问内存到了4GB，寄存器也变成32位的，所以原来的内存地址计算方式不再适合了。<br>保护模式的内存访问方式参见CSAPP第九章虚拟内存</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/11/x86汇编/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/11/x86汇编/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-11 11:15:04" itemprop="dateCreated datePublished" datetime="2019-09-11T11:15:04+08:00">2019-09-11</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/07/@Autowired注解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/07/@Autowired注解/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-07 11:23:48 / Modified: 11:27:26" itemprop="dateCreated datePublished" datetime="2019-09-07T11:23:48+08:00">2019-09-07</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>##@Autowire依赖注入的三种方式</p>
<p>今天突然发现idea报的警告，是说</p>
<pre><code class="java"><span class="meta">@Autowired</span>
RegistService registService;
</code></pre>
<p>警告内容是Field injection is not recommended，意思是使用变量依赖注入的方式是不推荐的，<br>依赖注入一共有三种方式：<br>变量依赖注入<br>构造器构造注入<br>set方法注入</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/Phil Storrs PC Hardware book/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/09/03/Phil Storrs PC Hardware book/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-03 10:11:10" itemprop="dateCreated datePublished" datetime="2019-09-03T10:11:10+08:00">2019-09-03</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-05 17:53:40" itemprop="dateModified" datetime="2019-09-05T17:53:40+08:00">2019-09-05</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Phil-Storrs-PC-Hardware-book"><a href="#Phil-Storrs-PC-Hardware-book" class="headerlink" title="Phil Storrs PC Hardware book"></a>Phil Storrs PC Hardware book</h2><h3 id="The-DOS-Computer-and-its-Memory"><a href="#The-DOS-Computer-and-its-Memory" class="headerlink" title="The DOS Computer and its Memory"></a>The DOS Computer and its Memory</h3><p>电脑内存可以按构成的硬件或使用方式分类，<br>按硬件类型分：<br>RAM - 随机读写<br>ROM - 只读内存</p>
<p>按使用方式分：<br>Base Memory<br>ExTended memory<br>ExPanded (EMS) memory<br>XMS memory<br>Virtual memory</p>
<p>RAM提供一个供DOS和其他软件执行其操作的区域，这块内存可以被读取，所以程序代码可以反复地被加载执行，他也同样可以被写入，所以程序得以保存修改并持久化到硬盘上。RAM是volatile内存，这意味着断电时内容会丢失。<br>ROM（只读内存）是为操作系统和其他硬件保留的，它保存了操作系统和其他软件用于管理资源的指令，他不可以被改写，因此它也不用于工作区域。最常见的例子就是BIOS了。</p>
<p>Memory allocations：<br>Base Memory 这是DOS最初的１MB空间，8080处理器只有20 address lines,它限制了可寻址的区域范围是1M bytes，2^20是1024000<br>Extended Memory是1M bytes以上的内存空间，虽然DOS在默认模式下不能寻址超过1M,80286及以上可以在保护模式下直接寻址该区域。所以被非DOS和最近的DOS系统应用程序所使用。Extended Memory可以被重新映射成expanded memory, XMS memory, and RAM (non-physical) disk drives。</p>
<p>Expanded Memory<br>Expanded (EMS) memory is accessed by mapping 64K bytes of memory (called a page) from a non-DOS addressable area into a specific memory address in the Reserved Memory Area. The 64K byte area of the reserved memory used to map this extra memory into, is called the Page Frame. The Page Frame must lay between the top of the Video BIOS Extension ROM at C7FFF, and the start of the System BIOS ROM at F0000. The presence of other BIOS Extension ROMs and RAM on specialized I/O cards, must be taken into account when allocating the Page Frame. With older versions of DOS, EMS Memory is managed by a device driver installed from the config.sys file at boot-up. The EMS Manager makes memory available to EMS-aware products that use this memory for temporary work and data storage.</p>
<p>The technique for swapping pages of memory above and below the 1M byte limit is called bank switching and up to 32M byte of memory can be addressed this way.<br>The first implementation of EMS Memory was the Above Board from Intel and it provided EMS memory via a hardware card plugged into a Bus Slot in PC and PC/XT computers. When the AT computer was released the Extended memory it provided was of no use to DOS so schemes were devised to manage this memory as Expanded Memory, rather than Extended Memory. Later versions of DOS have much more extensive Memory Management provisions and the device driver EMM386 can provide Expanded Memory by making some Extended memory available for this purpose and switching it in and out of the Page Frame as applications requests it.</p>
<p>EMS本来是为有20位地址总线限制的8088处理器提供更多内存的方法，现在我们的现代操作系统不再需要EMS了，但是一些老的程序也许不能利用Extended Memory,需要一些EMS内存吗，DOS中的内存优化器Memmaker给了我们允许一些EMS内存的选项。</p>
<table>
<thead>
<tr>
<th>　Expanded Memory</th>
<th style="text-align:center">Extended Memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>需要内存管理器</td>
<td style="text-align:center">不需要</td>
</tr>
<tr>
<td>需要页框</td>
<td style="text-align:center">不需要</td>
</tr>
<tr>
<td>CPU实模式</td>
<td style="text-align:center">保护模式</td>
</tr>
<tr>
<td>DOS可以使用</td>
<td style="text-align:center">DOS不可以</td>
</tr>
<tr>
<td>8088/86可以使用</td>
<td style="text-align:center">8088/86不可以</td>
</tr>
</tbody>
</table>
<p>XMS Memory<br>The eXtended Memory Specification (XMS), developed by Microsoft, allows programs to request memory above the conventional memory area for program storage and use. The DOS device driver that provides XMS Memory is EMM386. Only XMS-aware programs use XMS memory but the Memory Manager can make memory available as either Extended or Expanded memory if an application requires these.</p>
<p>XMS memory can be allocated from three locations and you will learn more about these soon.<br>(1)Memory recovered from the Reserved Memory area in blocks called Upper Memory Blocks (UMBs).<br>(2)Extended memory in blocks called Extended Memory Blocks (EMBs)<br>(3)The High Memory Area (HMA), a specific 64K byte area in extended memory at address 100000hex .</p>
<p>Address line A20<br>Address line A20 is the 21st address line and it is this line that selects memory locations above one Meg. XMS memory from the High Memory Area is available due to a bug in the 80286 chip’s emulation of the 8086/8088 processor chip, concerning the A20 address line. The bug was retained in the 80386 for compatibility, but the A20 address line control feature was added to turn the bug on and off.  </p>
<p>Virtual Memory<br>虚拟内存是一个魔术，它巧妙地组织微处理器、程序和外存之间的合作关系。<br>当一个程序跑起来以后，操作系统为它创建了一个虚拟内存空间让程序自由处理。然后，计算机的真实内存中的一部分就交给了这个魔术操作，这是虚拟内存的核心概念。Using a feature that is an integral part of the 386 and 486 processors, the operating system’s Virtual Memory Manager routine tells the processor to make the real memory that’s being assigned to the program to appear to be at some other address, the virtual address that the program will be using. A “memory mapping” feature in the processor makes the real memory appear to have a different working memory address than its true, real address.<br>This is just a shuffling act, a trick that makes some real memory addresses appear to be, and to work as, some other virtual address. The most important part of virtual memory comes in the next step, when our programs try to use more virtual memory than there is real memory. A program starts out with some of its (large) virtual memory space mapped into part of the computer’s (smaller) real memory. As long as the program is only working with that part of its virtual memory, all goes well. The program is actually using different locations in memory than it thinks it is, but that does not matter. What happens when the program tries to use some of the larger virtual memory that hasn’t been assigned as part of the smaller real memory ?. When that occurs, the Memory Manager consults a Mapping Table and discovers that the program is trying to use an address that doesn’t currently exist. This condition is indicated by what is called a Page Fault.<br>When there is a page fault indicating that a program is trying to use a virtual address that isn’t actively mapped into real memory, a Virtual Memory Support routine swings into action. It temporarily places the program on hold while it deals with the crises. The Memory Manager chooses some part of the virtual memory that is currently in real memory, saves its contents temporarily onto the disk, this process is called swapping out. That part of the real memory is recycled to act as the newly-needed part of the virtual memory. When the swapped-out part of memory is needed again, it’s swapped-in, copied back from the disk. As you can see, the computer’s disk is used as a warehouse to store the parts of the virtual memory that are not currently in use.<br>取决于多方面的因素，虚拟内存可以表现得很平滑，也可能涉及到太多的swapping in and out，以至于浪费很多时间在内存和硬盘的交换上。这个现象叫Thrashing，当它发生时，系统就会变慢。  </p>
<p>The Base Mermory（基址内存？） original IBM PC/XT 可用的1M的可用空间，可分为两个区域：<br>(1)Conventional Memory: 0x00000 to 0x9FFFF (0 to 640 K byte)<br>(2)Reserved Memory :  memory from 0xA0000 to 0xFFFFF (640 K byte to 1 MB)</p>
<p>Conventional Memory(也被称作User RAN 或Base Memory)<br>这是最开头的640K bytes 从0x00000 到 0x9FFFF, 这是属于旧版DOS的内存区域，DOS在这里加载自己，驱动通过CONFIG.SYS and AUTOEXEC.BAT安装。DOS同样在这里加载应用程序，　如用户加载常驻程序（resident programs）如记事本等。<br>Conventional Memory是很拥挤的，这是计算机中最拥挤的地方，在配置完DOS，加载完驱动和其他的常驻程序后，大概只剩下400到600K bytes空余内存，可能不够启动一些应用程序，而且即使对于某些的启动的应用程序，有更多的空余空间会更高效。  </p>
<p>Reserved Memory 这是在640K bytes之上的384K bytes地址，是为系统保留的，用于像Video RAN,System BIOS RAM,及BIOS Extension ROMs及用于网卡、SCSI接口的内存区域。一般来说，这片地址不能被应用程序寻址。稍后再细说这片区域是怎么使用的。  </p>
<p>Memory above One Meg and DOS<br>CPU（中央处理器）限制了计算机可以使用的最大内存。The Intel 286及现今使用的桌面处理器有两种操作模式，protected mode and real mode.  </p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/31/记一次有趣的现象--并发/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/08/31/记一次有趣的现象--并发/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-31 11:17:27" itemprop="dateCreated datePublished" datetime="2019-08-31T11:17:27+08:00">2019-08-31</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-07 14:24:13" itemprop="dateModified" datetime="2019-09-07T14:24:13+08:00">2019-09-07</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (!generator.isCanceled()) &#123;</span><br><span class="line">            <span class="keyword">int</span> val = generator.next();</span><br><span class="line">            System.out.println(<span class="string">"val "</span> + val);</span><br><span class="line">            <span class="keyword">if</span> (val % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(val + <span class="string">" not even"</span>);</span><br><span class="line">                generator.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ++currentEvenValue;</span><br><span class="line">        ++currentEvenValue;</span><br><span class="line">        <span class="keyword">return</span> currentEvenValue;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/30/functional interace/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/08/30/functional interace/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-30 10:30:57" itemprop="dateCreated datePublished" datetime="2019-08-30T10:30:57+08:00">2019-08-30</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/11/比赛系统方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/08/11/比赛系统方案/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-11 18:07:49" itemprop="dateCreated datePublished" datetime="2019-08-11T18:07:49+08:00">2019-08-11</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
        <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block home">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/11/JSON/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
            
            <a href="/2019/08/11/JSON/" class="post-title-link" itemprop="url">Untitled</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-11 01:04:53" itemprop="dateCreated datePublished" datetime="2019-08-11T01:04:53+08:00">2019-08-11</time>
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Long&gt; <span class="title">saveOrSubmit</span><span class="params">(JSONObject jsonObject)</span> </span>&#123;</span><br><span class="line">       JSONArray resultList = jsonObject.getJSONArray(<span class="string">"data"</span>);</span><br><span class="line">       <span class="keyword">int</span> submitType = jsonObject.getInt(<span class="string">"type"</span>);</span><br><span class="line">       <span class="keyword">long</span> userId = jsonObject.getLong(<span class="string">"uid"</span>);</span><br><span class="line">       <span class="keyword">long</span> competitionId = jsonObject.getLong(<span class="string">"cid"</span>);</span><br><span class="line"></span><br><span class="line">       List&lt;CompetitionStage&gt; list = <span class="keyword">null</span>;</span><br><span class="line">       <span class="comment">//保存</span></span><br><span class="line">       <span class="keyword">if</span> (submitType == <span class="number">1</span>) &#123;</span><br><span class="line">           competitionDao.deleteOldResult(userId);</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; resultList.length(); i++) &#123;</span><br><span class="line">               CompetitionResult pb = resultList.getJSONObject(i).;</span><br><span class="line">           &#125;</span><br><span class="line">           list = (List&lt;CompetitionStage&gt;)(Object)resultList.toList();</span><br><span class="line">           <span class="keyword">for</span> (CompetitionStage pb : list) &#123;</span><br><span class="line">               pb.setUserId(userId);</span><br><span class="line">           &#125;</span><br><span class="line">           competitionDao.save(list);</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">new</span> HashedMap();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//检查是否重复提交</span></span><br><span class="line">       <span class="keyword">if</span> (competitionDao.checRepeat(userId, competitionId) != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>JSONObject是一个核心类，它内部利用HashMap进行存储，实现了从一个字符串、Map对象、Java对象，JSONObject对象自身来构建一个key-value形式的JSON数据格式类型对象（这种数据格式与JavaScript的对象格式非常相似）。从而达到Map一样的操作，并可以输出为标准的JSON字符串。 </p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.7.1</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
